## This file contains a netplan-compatible configuration which cloud-init
## will apply on first-boot. Please refer to the cloud-init documentation and
## the netplan reference for full details:
##
## References:
##   - https://cloudinit.readthedocs.io/
##   - https://netplan.io/reference

version: 2
ethernets:
  # Trunk links.
  eth0:
    dhcp4: no
    match:
      name: eth0
  eth1:
    dhcp4: yes
    match:
      name: eth1

# bonds:
#   # Bonded link.
#   bond0:
#     dhcp4: no
#     interfaces:
#       - eth0
#     parameters:
#       mode: balance-alb
#       mii-monitor-interval: 1

vlans:
  # Management network.
  vlan1:
    id: 1
    link: eth0
    dhcp4: no
    addresses:
      - 192.168.254.254/24
  # WAN.
  vlan2:
    id: 2
    link: eth0
    dhcp4: yes
    dhcp4-overrides:
      use-dns: false
    nameservers:
      search:
        - net.nicklasfrahm.xyz
      addresses:
        - 1.1.1.1
        - 1.0.0.1
  # LAN.
  vlan3:
    id: 3
    link: eth0
    dhcp4: no
    addresses:
      - 192.168.255.254/24
